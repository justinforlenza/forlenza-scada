<!DOCTYPE html>
<!--
    IMPORTANT: IE8 COMPATIBILITY REQUIREMENTS
    ========================================

    This Mock SCADA interface MUST maintain compatibility with Internet Explorer 8.

    When modifying this file, you MUST adhere to the following restrictions:

    CSS RESTRICTIONS:
    - NO CSS3 features (border-radius, box-shadow, gradients, transforms, transitions, animations)
    - NO rgba() colors - use hex colors only (#RRGGBB)
    - NO :nth-child() selectors - use class-based selectors instead
    - NO flexbox or grid layouts - use floats, tables, or absolute positioning
    - NO @media queries for responsive design
    - NO CSS calc() function
    - NO multiple background images

    JAVASCRIPT RESTRICTIONS:
    - NO ES5+ features (forEach, map, filter, reduce, Object.keys, JSON.parse/stringify)
    - NO addEventListener() - use attachEvent() for IE8 or inline event handlers
    - NO querySelector/querySelectorAll - use getElementById, getElementsByTagName, getElementsByClassName
    - NO Array.isArray() - use typeof check instead
    - NO console.log() - IE8 console may not exist
    - NO strict mode ("use strict")
    - NO const/let keywords - use var only

    HTML RESTRICTIONS:
    - NO HTML5 semantic elements (header, nav, section, article, aside, footer)
    - NO HTML5 input types (email, url, number, date, etc.) - use text inputs with validation
    - NO data-* attributes beyond basic usage
    - NO placeholder attribute on inputs
-->
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="UTF-8">
    <title>Forlenza Industrial SCADA Control System</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: monospace;
            background-color: #008080;
            color: #000000;
            overflow: hidden;
            cursor: default;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .clearfix {
            clear: both;
        }

        .content {
            background-color: #c0c0c0;
            padding: 8px;
        }

        /* Menu bar */
        .menubar {
            background-color: #c0c0c0;
            border-bottom: 1px solid #ffffff;
            padding: 2px 0;
        }

        .menu-item {
            display: inline-block;
            padding: 4px 8px;
            font-size: 11px;
            color: #000000;
            cursor: default;
        }

        .menu-item:hover {
            background-color: #000080;
            color: #ffffff;
        }

        /* Status bar */
        .statusbar {
            background-color: #c0c0c0;
            border-top: 1px solid #ffffff;
            padding: 2px 4px;
            font-size: 11px;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 18px;
        }

        .status-section {
            border: 1px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            display: inline-block;
            padding: 2px 6px;
            margin-right: 4px;
        }

        /* Panels */
        .panel {
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            margin: 8px;
            padding: 4px;
        }

        .panel-title {
            background: #000080;
            color: #ffffff;
            padding: 2px 4px;
            font-size: 11px;
            font-weight: bold;
            margin: -4px -4px 4px -4px;
        }

        /* LED indicators */
        .led-panel {
            background-color: #000000;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            padding: 8px;
            margin: 4px;
        }

        .led-row {
            margin: 4px 0;
        }

        .led {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            display: inline-block;
            margin-right: 8px;
            border: 1px solid #404040;
        }

        .led.green-on {
            background-color: #00ff00;
            box-shadow: 0 0 4px #00ff00;
        }

        .led.green-off {
            background-color: #004000;
        }

        .led.red-on {
            background-color: #ff0000;
            box-shadow: 0 0 4px #ff0000;
        }

        .led.red-off {
            background-color: #400000;
        }

        .led.yellow-on {
            background-color: #ffff00;
            box-shadow: 0 0 4px #ffff00;
        }

        .led.yellow-off {
            background-color: #404000;
        }

        .led-label {
            color: #00ff00;
            font-family: "Courier New", monospace;
            font-size: 11px;
            display: inline-block;
            width: 120px;
        }

        /* Digital displays */
        .digital-display {
            background-color: #000000;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            padding: 4px 8px;
            font-family: "Courier New", "Lucida Console", monospace;
            font-size: 16px;
            color: #00ff00;
            text-align: right;
            margin: 4px;
            min-width: 80px;
            display: inline-block;
        }

        .display-label {
            font-size: 11px;
            margin: 2px 4px;
            display: inline-block;
            width: 100px;
        }

        /* Buttons */
        .button {
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            padding: 4px 12px;
            font-size: 11px;
            font-family: "Tahoma", "MS Sans Serif", sans-serif;
            color: #000000;
            cursor: pointer;
            display: inline-block;
            margin: 2px;
        }

        .button:active {
            border-color: #808080 #ffffff #ffffff #808080;
            padding: 5px 11px 3px 13px;
        }

        .button.emergency {
            background-color: #ff0000;
            color: #ffffff;
            font-weight: bold;
            padding: 8px 20px;
            font-size: 12px;
        }

        /* Grid layout */
        .grid-container {
            display: table;
            width: 100%;
            height: 100vh;
        }

        .grid-row {
            display: table-row;
        }

        .grid-cell {
            display: table-cell;
            vertical-align: top;
            padding: 4px;
        }

        .left-panel {
            width: 200px;
            background-color: #808080;
        }

        .center-panel {
            background-color: #c0c0c0;
        }

        .right-panel {
            width: 250px;
            background-color: #808080;
        }

        /* Alarm list */
        .alarm-list {
            background-color: #000000;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            height: 150px;
            overflow-y: auto;
            padding: 4px;
            margin: 4px;
        }

        .alarm-item {
            color: #ff0000;
            font-family: "Courier New", monospace;
            font-size: 10px;
            padding: 2px 0;
        }

        .alarm-time {
            color: #ffff00;
        }

        /* Gauge meter */
        .gauge-container {
            display: inline-block;
            margin: 8px;
            text-align: center;
        }

        .gauge-label {
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .gauge-meter {
            width: 120px;
            height: 60px;
            background-color: #000000;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            position: relative;
            overflow: hidden;
        }

        .gauge-scale {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .gauge-needle {
            position: absolute;
            width: 2px;
            height: 50px;
            background-color: #ff0000;
            bottom: 0;
            left: 50%;
        }

        .gauge-value {
            background-color: #000000;
            color: #00ff00;
            font-family: "Courier New", monospace;
            font-size: 12px;
            padding: 2px 4px;
            margin-top: 2px;
            border: 1px solid #808080;
        }

        /* Process table */
        .process-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
            margin: 4px 0;
        }

        .process-table th {
            background-color: #808080;
            color: #ffffff;
            padding: 2px 4px;
            text-align: left;
            border: 1px solid #c0c0c0;
        }

        .process-table td {
            padding: 2px 4px;
            border: 1px solid #808080;
            background-color: #ffffff;
        }

        /* Scrollbar styling for IE */
        .alarm-list {
            scrollbar-face-color: #c0c0c0;
            scrollbar-track-color: #808080;
            scrollbar-arrow-color: #000000;
            scrollbar-3dlight-color: #ffffff;
            scrollbar-darkshadow-color: #000000;
            scrollbar-highlight-color: #ffffff;
            scrollbar-shadow-color: #808080;
        }
    </style>
</head>

<body>

    <div class="grid-container">
        <div class="grid-row">
            <div class="grid-cell left-panel">
                <div class="panel">
                    <div class="panel-title">SYSTEM STATUS</div>
                    <div class="led-panel">
                        <div class="led-row">
                            <span class="led green-on" id="led1"></span>
                            <span class="led-label">SYS ONLINE</span>
                        </div>
                        <div class="led-row">
                            <span class="led green-on" id="led2"></span>
                            <span class="led-label">PLC COMM</span>
                        </div>
                        <div class="led-row">
                            <span class="led yellow-on" id="led3"></span>
                            <span class="led-label">PUMP A</span>
                        </div>
                        <div class="led-row">
                            <span class="led green-off" id="led4"></span>
                            <span class="led-label">PUMP B</span>
                        </div>
                        <div class="led-row">
                            <span class="led red-off" id="led5"></span>
                            <span class="led-label">ALARM</span>
                        </div>
                        <div class="led-row">
                            <span class="led green-on" id="led6"></span>
                            <span class="led-label">COOLING</span>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-title">CONTROL</div>
                    <button class="button" onclick="buttonClick('START')">START</button>
                    <button class="button" onclick="buttonClick('STOP')">STOP</button>
                    <button class="button" onclick="buttonClick('RESET')">RESET</button>
                    <button class="button emergency" onclick="emergencyStop()">EMERGENCY<br />STOP</button>
                </div>
            </div>

            <div class="grid-cell center-panel">
                <div class="panel">
                    <div class="panel-title">PROCESS VALUES</div>

                    <div style="text-align: center;">
                        <div class="gauge-container">
                            <div class="gauge-label">TEMPERATURE</div>
                            <div class="gauge-meter">
                                <div class="gauge-needle" id="temp-needle"></div>
                            </div>
                            <div class="gauge-value" id="temp-value">178.5째C</div>
                        </div>

                        <div class="gauge-container">
                            <div class="gauge-label">PRESSURE</div>
                            <div class="gauge-meter">
                                <div class="gauge-needle" id="pressure-needle"></div>
                            </div>
                            <div class="gauge-value" id="pressure-value">2.4 BAR</div>
                        </div>

                        <div class="gauge-container">
                            <div class="gauge-label">FLOW RATE</div>
                            <div class="gauge-meter">
                                <div class="gauge-needle" id="flow-needle"></div>
                            </div>
                            <div class="gauge-value" id="flow-value">847 L/m</div>
                        </div>
                    </div>

                    <div style="margin-top: 10px;">
                        <span class="display-label">REACTOR TEMP:</span>
                        <span class="digital-display" id="reactor-temp">0185.7</span>
                        <span class="display-label">COOLANT TEMP:</span>
                        <span class="digital-display" id="coolant-temp">0045.2</span>
                        <br />
                        <span class="display-label">SYSTEM PRESS:</span>
                        <span class="digital-display" id="sys-pressure">002.45</span>
                        <span class="display-label">FLOW TOTAL:</span>
                        <span class="digital-display" id="flow-total">48576</span>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-title">PROCESS DATA</div>
                    <table class="process-table">
                        <tr>
                            <th>TAG</th>
                            <th>DESCRIPTION</th>
                            <th>VALUE</th>
                            <th>UNIT</th>
                            <th>STATUS</th>
                        </tr>
                        <tr>
                            <td>PT-101</td>
                            <td>Inlet Pressure</td>
                            <td id="pt101">2.35</td>
                            <td>bar</td>
                            <td>NORMAL</td>
                        </tr>
                        <tr>
                            <td>TT-201</td>
                            <td>Core Temp</td>
                            <td id="tt201">178.4</td>
                            <td>째C</td>
                            <td>NORMAL</td>
                        </tr>
                        <tr>
                            <td>FT-301</td>
                            <td>Main Flow</td>
                            <td id="ft301">847.2</td>
                            <td>L/min</td>
                            <td>NORMAL</td>
                        </tr>
                        <tr>
                            <td>LT-401</td>
                            <td>Tank Level</td>
                            <td id="lt401">67.8</td>
                            <td>%</td>
                            <td>NORMAL</td>
                        </tr>
                        <tr>
                            <td>VLV-501</td>
                            <td>Control Valve</td>
                            <td id="vlv501">45.0</td>
                            <td>%</td>
                            <td>AUTO</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="grid-cell right-panel">
                <div class="panel">
                    <div class="panel-title">ACTIVE ALARMS</div>
                    <div class="alarm-list" id="alarm-list">
                        <div class="alarm-item">
                            <span class="alarm-time">[14:23:45]</span> HIGH TEMP WARNING - REACTOR 2
                        </div>
                        <div class="alarm-item">
                            <span class="alarm-time">[14:18:12]</span> LOW PRESSURE ALERT - LINE 4
                        </div>
                        <div class="alarm-item">
                            <span class="alarm-time">[13:55:08]</span> VALVE VLV-502 STUCK
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-title">SETPOINTS</div>
                    <table class="process-table">
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                        <tr>
                            <td>Temp SP</td>
                            <td>180.0째C</td>
                        </tr>
                        <tr>
                            <td>Press SP</td>
                            <td>2.5 bar</td>
                        </tr>
                        <tr>
                            <td>Flow SP</td>
                            <td>850 L/m</td>
                        </tr>
                        <tr>
                            <td>Level SP</td>
                            <td>70.0%</td>
                        </tr>
                    </table>
                </div>

                <div class="panel">
                    <div class="panel-title">RUNTIME</div>
                    <div style="padding: 4px; font-size: 11px;">
                        <div>System: <span id="runtime">147:23:16</span></div>
                        <div>Batch: <span id="batchtime">008:45:32</span></div>
                        <div>Cycle: <span id="cycletime">000:12:48</span></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="statusbar">
            <span class="status-section">COMM: OK</span>
            <span class="status-section">MODE: AUTO</span>
            <span class="status-section">USER: OPERATOR</span>
            <span class="status-section" id="clock">00:00:00</span>
            <span class="status-section" style="float: right;">Legacy Mode</span>
        </div>
    </div>

    <script type="text/javascript">
        // Clock update
        function updateClock() {
            var now = new Date();
            var hours = ('0' + now.getHours()).slice(-2);
            var minutes = ('0' + now.getMinutes()).slice(-2);
            var seconds = ('0' + now.getSeconds()).slice(-2);
            document.getElementById('clock').innerHTML = hours + ':' + minutes + ':' + seconds;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // IE8-compatible needle rotation function
        function rotateNeedle(elementId, degrees) {
            var element = document.getElementById(elementId);

            // Check if browser supports standard transform
            if (element.style.transform !== undefined) {
                element.style.transform = 'rotate(' + degrees + 'deg)';
            }
            // IE8 fallback using filter
            else if (element.style.filter !== undefined) {
                // Convert degrees to radians for IE8 matrix
                var radians = degrees * (Math.PI / 180);
                var cos = Math.cos(radians);
                var sin = Math.sin(radians);

                // IE8 Matrix filter for rotation
                element.style.filter = 'progid:DXImageTransform.Microsoft.Matrix(' +
                    'M11=' + cos + ',' +
                    'M12=' + (-sin) + ',' +
                    'M21=' + sin + ',' +
                    'M22=' + cos + ',' +
                    'SizingMethod="auto expand")';

                // Adjust position to maintain rotation around bottom center
                var rect = element.parentNode.getBoundingClientRect ? element.parentNode.getBoundingClientRect() : {width: 120, height: 60};
                var centerX = rect.width ? rect.width / 2 : 60;
                var centerY = rect.height ? rect.height : 60;

                element.style.left = (centerX - 1) + 'px';
                element.style.bottom = '0px';
            }
        }

        // LED blinking
        function toggleLED(id) {
            var led = document.getElementById(id);
            if (led.className.indexOf('yellow') > -1) {
                led.className = led.className.indexOf('-on') > -1 ? 'led yellow-off' : 'led yellow-on';
            }
        }
        setInterval(function () { toggleLED('led3'); }, 1000);
        setInterval(function () { toggleLED('led5'); }, 500);

        // Update values
        function updateValues() {
            // Temperature
            var temp = 170 + Math.random() * 20;
            document.getElementById('temp-value').innerHTML = temp.toFixed(1) + '째C';
            document.getElementById('reactor-temp').innerHTML = ('0000' + temp.toFixed(1)).slice(-6);
            document.getElementById('tt201').innerHTML = temp.toFixed(1);
            var tempAngle = -45 + (temp - 170) * 4.5;
            rotateNeedle('temp-needle', tempAngle);

            // Pressure
            var pressure = 2.0 + Math.random() * 1.0;
            document.getElementById('pressure-value').innerHTML = pressure.toFixed(1) + ' BAR';
            document.getElementById('sys-pressure').innerHTML = ('00' + pressure.toFixed(2)).slice(-6);
            document.getElementById('pt101').innerHTML = pressure.toFixed(2);
            var pressAngle = -45 + (pressure - 2.0) * 90;
            rotateNeedle('pressure-needle', pressAngle);

            // Flow
            var flow = 800 + Math.random() * 100;
            document.getElementById('flow-value').innerHTML = Math.round(flow) + ' L/m';
            document.getElementById('ft301').innerHTML = flow.toFixed(1);
            var flowAngle = -45 + (flow - 800) * 0.9;
            rotateNeedle('flow-needle', flowAngle);

            // Other values
            document.getElementById('coolant-temp').innerHTML = ('0000' + (40 + Math.random() * 10).toFixed(1)).slice(-6);
            document.getElementById('lt401').innerHTML = (60 + Math.random() * 20).toFixed(1);
            document.getElementById('vlv501').innerHTML = (40 + Math.random() * 20).toFixed(1);

            var total = parseInt(document.getElementById('flow-total').innerHTML);
            document.getElementById('flow-total').innerHTML = ('00000' + (total + Math.round(flow / 60))).slice(-5);
        }
        setInterval(updateValues, 2000);
        updateValues();

        // Runtime counters
        function updateRuntime() {
            var runtime = document.getElementById('runtime').innerHTML.split(':');
            var hours = parseInt(runtime[0]);
            var minutes = parseInt(runtime[1]);
            var seconds = parseInt(runtime[2]);

            seconds++;
            if (seconds >= 60) {
                seconds = 0;
                minutes++;
                if (minutes >= 60) {
                    minutes = 0;
                    hours++;
                }
            }

            document.getElementById('runtime').innerHTML =
                ('000' + hours).slice(-3) + ':' +
                ('00' + minutes).slice(-2) + ':' +
                ('00' + seconds).slice(-2);
        }
        setInterval(updateRuntime, 1000);

        // Button handlers
        function buttonClick(action) {
            alert('SCADA CONTROL\n\nCommand: ' + action + '\n\nCommand sent to PLC.');
        }

        function emergencyStop() {
            if (confirm('EMERGENCY STOP\n\nThis will halt all processes immediately!\n\nAre you sure?')) {
                alert('EMERGENCY STOP ACTIVATED\n\nAll systems halted.\nManual restart required.');
                document.getElementById('led1').className = 'led red-on';
                document.getElementById('led5').className = 'led red-on';
            }
        }

        // Add new alarm periodically
        function addAlarm() {
            var alarmList = document.getElementById('alarm-list');
            var now = new Date();
            var time = '[' + ('0' + now.getHours()).slice(-2) + ':' +
                ('0' + now.getMinutes()).slice(-2) + ':' +
                ('0' + now.getSeconds()).slice(-2) + ']';

            var alarms = [
                'VALVE POSITION DEVIATION - VLV-',
                'TEMPERATURE RISING - ZONE ',
                'PUMP VIBRATION HIGH - PUMP-',
                'FLOW RATE LOW - LINE ',
                'PRESSURE DIFFERENTIAL - FILTER-'
            ];

            var alarm = alarms[Math.floor(Math.random() * alarms.length)];
            var num = Math.floor(Math.random() * 500) + 100;

            var newAlarm = document.createElement('div');
            newAlarm.className = 'alarm-item';
            newAlarm.innerHTML = '<span class="alarm-time">' + time + '</span> ' + alarm + num;

            alarmList.insertBefore(newAlarm, alarmList.firstChild);

            // Remove old alarms if too many
            while (alarmList.children.length > 10) {
                alarmList.removeChild(alarmList.lastChild);
            }
        }
        setInterval(addAlarm, 30000);
    </script>
</body>

</html>